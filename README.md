# 1：区块链

### 1.1、区块链是什么

> 区块链是一种分布式账本技术，它可以在没有中心化管理机构的情况下，记录和验证各种类型的交易。它的本质是一个由多个节点组成的分布式网络，每个节点都可以看到整个网络上的交易记录。每个交易都被加密并打包成一个块，然后通过共识机制被添加到整个链中。这个过程使得区块链的交易记录具有防篡改性和去中心化的特性，因为每个节点都具有对交易记录的完整拷贝。

- 简单理解：**区块链是一个链条每个人都有这个链条(也可能只有一条)，同时所有人都在区块链这种平台挖区块，如果谁挖到什么，将这个信息公布到这个网络中，如果大家认同，就将这个区块加在所有人的链上，相当于账本添加了一笔账只不过是所有的人**

# 2：以太坊

### 2.1、什么是以太坊

> 以太坊是一种基于区块链技术的智能合约平台，它允许开发者构建和部署去中心化应用程序（DApps）。与比特币等其他区块链不同，以太坊可以运行代码，这意味着它可以实现更为复杂的应用程序和智能合约。
>
> 以太坊的核心是“以太”，它是以太坊网络的本地加密货币，用于支付交易费用和奖励参与共识的矿工。但与比特币不同，以太可以通过编写智能合约来创建更为复杂的交易和应用程序。
>
> 以太坊的智能合约是使用 Solidity 等编程语言编写的，它们是以太坊上运行的自动化合约。这些合约被存储在以太坊区块链上，因此它们是去中心化、不可篡改的。
>
> 以太坊还具有自己的虚拟机（EVM），它是一种计算环境，可以在以太坊网络中执行智能合约。这意味着开发者可以使用 Solidity 或其他编程语言编写的代码，在 EVM 上运行智能合约。

# 3：solidity

## 3.1、什么是solidity语言

- **一门类似javascript的静态类型语言（如java）**

Solidity是一种智能合约编程语言，被广泛用于以太坊平台上的去中心化应用（DApps）开发。它类似于JavaScript，但是具有更多的安全特性和区块链特定的功能。

Solidity语言的主要特点包括：

1. 安全性：Solidity是为了编写智能合约而设计的，因此它具有很多内置的安全特性，可以帮助开发人员避免一些常见的漏洞和攻击。
2. 可编程性：Solidity是一种高级编程语言，它提供了诸如条件语句、循环、函数等常见的编程结构，使得开发人员可以轻松地编写复杂的智能合约。
3. 与以太坊集成：Solidity是以太坊平台上最流行的智能合约语言，它与以太坊虚拟机（EVM）集成，可以与以太坊上的其他智能合约、代币和其他DApps进行交互。
4. 可读性：Solidity语言的语法结构类似于JavaScript，使得开发人员可以更容易地阅读和理解现有的代码。

![image-20230426111554391](/img/image-20230426111554391.png)

## 3.2、solidity智能合约执行过程

**图解1**

![image-20230426111743438](/img/image-20230426111743438.png)

**图解2**
![image-20230426111743438](/img/屏幕截图 2023-04-26 163635.png)

## 3.3、编写第一个智能合约

### 1）准备工作

1. 下载VsCode，
   - 并下载扩展solidity(**直接搜solidity就行**)
   - 并下载扩展remix

### 2）编写Hello World智能合约

**编写合约文件注意是后缀名是.sol**

```javascript
// SPDX-License-Identifier: MIT
pragma solidity >0.8.0;
contract HelloWorld {
    string messsage;  
	
    function getGreeting() public view returns (string memory) {
        return messsage;
    }

    function setGreeting(string memory _msg) public {
        messsage = _msg;
    }
}
```

#### 3）连接可以web端

**打开remix扩展，点击Start remixed client,开启客户端**

![image-20230426181618022](/img/image-20230426181618022.png)

**然后再浏览器打开remix官方网站[https://remix.ethereum.org]，建议是chrome因为稳定，为什么不在浏览器直接编写，因为开发效率不快，Vscoode方便有各种插件支持。如果连接成功Vscode中的remix客户端图标是绿色的，如上图**

![image-20230426182124674](/img/image-20230426182124674.png)

#### 4）编译、执行

**编译**

![image-20230426182408867](/img/image-20230426182408867.png)

**执行**

![image-20230426182646764](/img/image-20230426182646764.png)

## 3.4、语法

### 3.4.1） 变量

#### 1）状态变量

```java
pragma solidity >=0.5.0;
/**
*  状态变量
**/
contract StateVariableContract {
   string name;
   uint32 id;
}
上面代码中，name和id就是状态变量，这些变量在函数外部声明(例如类的属性)，并永久存储在以太坊区块链中。
```

#### 2）局部变量

局部变量（Local Variable）也叫本地变量，与后面我们说的局部变量是一样的。注意局部变量不仅仅是函数中的变量，参数也属于局部变量，包括入参和出参都是局部变量。

如下图所示为Solidity的状态变量与局部变量，状态变量只会出现在一个位置，局部变量可以是函数的入参、出参和函数体中定义的变量。

![image-20230426185627053](/img/121241.png)

### 3.4.2）数据类型

#### 1）简介

Solidity对数据有很多分类，最常用的是值类型和引用类型。分清楚值类型和引用类型很重要。

**值类型**

值类型主要包括如Booleans类型、Integers相关类型、Fixeds相关类型、Enum类型等各种字面量类型（除了数组字面量）。另外还有几个比较特殊的，如定长字节数组、合约类型、地址类型和函数类型。

**引用类型**

所有的引用类型，如数组和结构体类型，**都有一个额外注解数据位置 **，来说明数据存储位置。有三种位置：内存（memory）、存储（storage）以及调用数据（calldata）。调用数据仅对外部合约函数的参数有效，同时也是必须的。调用数据是不可修改的、非持久的函数参数

引用类型比较少，需要注意的是数组类型，其实字符串string和变长字节数组本质上也是一个数组，是一个字节数组（byte[]），只是做了特殊的处理而已。

#### 2）值类型

值类型的变量将始终按值来传递。 也就是说，当这些变量被用作函数参数或者用在赋值语句中时，总会进行**值拷贝**。

值类型主要包括如：

- 布尔类型
- 整型
- 定长浮点型
- 地址类型
- 合约类型
- 定长字节数组
- 地址字面常量
- 有理数和整数字面常量
- 字符串字面常量
- 十六进制字面常量
- 枚举类型
- 函数类型

##### 2.1）布尔类型

Booleans类型使用的关键字是bool，那为什么叫Booleans类型呢？Boolean包含两个值，一个是true，另一个是false，都是小写的，可以把它们当作是常量，并且也只能是常量true或者false。**Boolean类型不支持其他类型显式或者隐式地转换为Boolean类型**。什么意思呢？就是不支持下面这样的操作：

```java
if(1){
    return 1;
}if(-1){
    return 2;
}

```

**bool类型的操作符有：**

```java
！（逻辑非）；
&&（逻辑与）；
||（逻辑或）；
==（等值判断）；
！=（不等判断）。
```



##### 2.2）整型

##### 2.3）**定长浮点型**

##### 2.4）地址类型

##### 2.5）**合约类型**

##### 2.6）**定长字节数组**

##### 2.7）**变长字节数组**

##### 2.8）**字面量**

#### 3）引用类型

##### 3.1）数据位置

##### 3.2）数组

##### 3.3）**映射类型**

##### 3.4）**结构体**

#### 4）类型转换

**1）基本类型之前的转换**

**2）字面常量与基本类型的转换**

#### 5）delete运算符

**1）delete与常见类型**

**2）delete与数组**

**3）delete与mapping**

**4）delete与struct**	

#### 1）view

- **加了view的方法表示这个方法是只读不写的**

#### 2）memory

- **一般和引用类型一起使用，而且只能在方法参数或者返回值中使用，在合约中string和数组以及自定义的接口之类都算是引用类型**